var gdjs;(function(n){class a extends n.RuntimeObject{constructor(e,i){super(e,i);this._opacity=255;this._scaleX=1;this._scaleY=1;this._flippedX=!1;this._flippedY=!1;this._currentAnimationIndex=-1;this._animationSpeedScale=1;this._animationPaused=!1;this._isPausedFrameDirty=!1;this._animations=i.content.animations,this._originalScale=i.content.scale,this.spineResourceName=i.content.spineResourceName,this._animationMixingDuration=0,this._renderer=new n.SpineRuntimeObjectRenderer(this,e),this.setAnimationIndex(0),this._renderer.updateAnimation(0),this.onCreated()}update(e){if(this._animationPaused){this._isPausedFrameDirty&&(this._renderer.updateAnimation(0),this.invalidateHitboxes(),this._isPausedFrameDirty=!1);return}const i=this.getElapsedTime()/1e3;this._renderer.updateAnimation(i*this._animationSpeedScale),this.invalidateHitboxes()}getRendererObject(){return this._renderer.getRendererObject()}updateFromObjectData(e,i){return super.updateFromObjectData(e,i),e.content.scale!==i.content.scale&&(this._originalScale=i.content.scale,this._renderer.updateScale(),this.invalidateHitboxes()),!0}getNetworkSyncData(){return{...super.getNetworkSyncData(),opa:this._opacity,scaX:this.getScaleX(),scaY:this.getScaleY(),flipX:this.isFlippedX(),flipY:this.isFlippedY(),ani:this.getAnimationIndex(),anmd:this.getAnimationMixingDuration(),anp:this.isAnimationPaused(),anss:this.getAnimationSpeedScale(),anet:this.getAnimationElapsedTime()}}updateFromNetworkSyncData(e){super.updateFromNetworkSyncData(e),e.opa!==void 0&&e.opa!==this._opacity&&this.setOpacity(e.opa),e.scaX!==void 0&&e.scaX!==this.getScaleX()&&this.setScaleX(e.scaX),e.scaY!==void 0&&e.scaY!==this.getScaleY()&&this.setScaleY(e.scaY),e.flipX!==void 0&&e.flipX!==this.isFlippedX()&&this.flipX(e.flipX),e.flipY!==void 0&&e.flipY!==this.isFlippedY()&&this.flipY(e.flipY),e.ani!==void 0&&e.ani!==this.getAnimationIndex()&&this.setAnimationIndex(e.ani),e.anmd!==void 0&&e.anmd!==this.getAnimationMixingDuration()&&this.setAnimationMixingDuration(e.anmd),e.anp!==void 0&&e.anp!==this.isAnimationPaused()&&(e.anp?this.pauseAnimation():this.resumeAnimation()),e.anss!==void 0&&e.anss!==this.getAnimationSpeedScale()&&this.setAnimationSpeedScale(e.anss),e.anet!==void 0&&e.anet!==this.getAnimationElapsedTime()&&this.setAnimationElapsedTime(e.anet)}extraInitializationFromInitialInstance(e){const i=e.numberProperties.find(t=>t.name==="animation"),s=i?i.value:this._currentAnimationIndex;this.setAnimationIndexWithMixing(s,0),e.customSize&&(this.setSize(e.width,e.height),this.invalidateHitboxes()),e.opacity!==void 0&&this.setOpacity(e.opacity),e.flippedX&&this.flipX(e.flippedX),e.flippedY&&this.flipY(e.flippedY)}getDrawableX(){const e=this._renderer.getOriginOffset();return this.getX()+e.x}getDrawableY(){const e=this._renderer.getOriginOffset();return this.getY()+e.y}getCenterX(){return-this._renderer.getOriginOffset().x}getCenterY(){return-this._renderer.getOriginOffset().y}onDestroyed(){super.onDestroyed(),this._renderer.onDestroy()}setX(e){super.setX(e),this._renderer.updatePosition()}setY(e){super.setY(e),this._renderer.updatePosition()}setAngle(e){super.setAngle(e),this._renderer.updateAngle()}setOpacity(e){this._opacity=Math.max(0,Math.min(255,e)),this._renderer.updateOpacity()}getOpacity(){return this._opacity}getWidth(){return this._renderer.getWidth()}getHeight(){return this._renderer.getHeight()}setWidth(e){const i=this._renderer.getUnscaledWidth();i!==0&&this.setScaleX(e/i)}setHeight(e){const i=this._renderer.getUnscaledHeight();i!==0&&this.setScaleY(e/i)}setSize(e,i){this.setWidth(e),this.setHeight(i)}setScale(e){e<0&&(e=0),!(e===Math.abs(this._scaleX)&&e===Math.abs(this._scaleY))&&(this._scaleX=e*(this._flippedX?-1:1),this._scaleY=e*(this._flippedY?-1:1),this._renderer.updateScale(),this.invalidateHitboxes())}setScaleX(e){e<0&&(e=0),e!==Math.abs(this._scaleX)&&(this._scaleX=e*(this._flippedX?-1:1),this._renderer.updateScale(),this.invalidateHitboxes())}setScaleY(e){e<0&&(e=0),e!==Math.abs(this._scaleY)&&(this._scaleY=e*(this._flippedY?-1:1),this._renderer.updateScale(),this.invalidateHitboxes())}getScale(){const e=Math.abs(this._scaleX),i=Math.abs(this._scaleY);return e===i?e:Math.sqrt(e*i)}getScaleY(){return Math.abs(this._scaleY)}getScaleX(){return Math.abs(this._scaleX)}isFlippedX(){return this._flippedX}isFlippedY(){return this._flippedY}flipX(e){e!==this._flippedX&&(this._scaleX*=-1,this._flippedX=e,this.invalidateHitboxes(),this._renderer.updateScale())}flipY(e){e!==this._flippedY&&(this._scaleY*=-1,this._flippedY=e,this.invalidateHitboxes(),this._renderer.updateScale())}setAnimationIndex(e){this.setAnimationIndexWithMixing(e,this._animationMixingDuration)}setAnimationIndexWithMixing(e,i){if(this._animations.length===0||this._currentAnimationIndex===e||!this.isAnimationIndex(e))return;const s=this._animations[this._currentAnimationIndex],t=this._animations[e];this._currentAnimationIndex=e,s&&this._renderer.setMixing(s.source,t.source,i),this._renderer.setAnimation(t.source,t.loop),this._isPausedFrameDirty=!0}setAnimationName(e){this.setAnimationNameWithMixing(e,this._animationMixingDuration)}setAnimationNameWithMixing(e,i){this.setAnimationIndexWithMixing(this.getAnimationIndexFor(e),i)}getAnimationIndexFor(e){return this._animations.findIndex(i=>i.name===e)}getAnimationMixingDuration(){return this._animationMixingDuration}setAnimationMixingDuration(e){this._animationMixingDuration=e}getAnimationIndex(){return this._currentAnimationIndex}getAnimationName(){return this.isAnimationIndex(this._currentAnimationIndex)?this._animations[this._currentAnimationIndex].name:""}isAnimationIndex(e){return Number.isInteger(e)&&e>=0&&e<this._animations.length}hasAnimationEnded(){return this._renderer.isAnimationComplete()}isAnimationPaused(){return this._animationPaused}pauseAnimation(){this._animationPaused=!0}resumeAnimation(){this._animationPaused=!1}getAnimationSpeedScale(){return this._animationSpeedScale}setAnimationSpeedScale(e){this._animationSpeedScale=e}getAnimationElapsedTime(){return this._animations.length===0?0:this._renderer.getAnimationElapsedTime()}setAnimationElapsedTime(e){this._animations.length!==0&&(this._renderer.setAnimationElapsedTime(e),this._isPausedFrameDirty=!0)}getPointAttachmentX(e,i){return this._renderer.getPointAttachmentPosition(e,i).x}getPointAttachmentY(e,i){return this._renderer.getPointAttachmentPosition(e,i).y}getAnimationDuration(){return this._animations.length===0?0:this._renderer.getAnimationDuration(this._animations[this._currentAnimationIndex].source)}}n.SpineRuntimeObject=a,n.registerObject("SpineObject::SpineObject",n.SpineRuntimeObject)})(gdjs||(gdjs={}));
//# sourceMappingURL=spineruntimeobject.js.map
